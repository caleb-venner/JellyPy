{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "JellyPy Advanced Script Configuration Examples",
  "description": "Example configurations for the JellyPy Jellyfin plugin advanced script settings",
  "examples": [
    {
      "name": "Movie Playback Notifier",
      "description": "Send notifications when movies are played",
      "config": {
        "Name": "Movie Playback Notifier",
        "Description": "Notify when any movie starts playing",
        "Enabled": true,
        "Priority": 100,
        "Triggers": ["PlaybackStart"],
        "Conditions": [
          {
            "Field": "ItemType",
            "Operator": "Equals",
            "Value": "Movie",
            "CaseSensitive": false
          }
        ],
        "Execution": {
          "ExecutorType": "Python",
          "ExecutablePath": "/usr/bin/python3",
          "ScriptPath": "/config/scripts/movie_notify.py",
          "WorkingDirectory": "/config/scripts",
          "AdditionalArguments": "--format json",
          "EnvironmentVariables": {
            "NOTIFICATION_LEVEL": "INFO"
          },
          "TimeoutSeconds": 60
        },
        "DataAttributes": [
          {
            "Name": "movie-title",
            "SourceField": "ItemName",
            "Format": "Argument",
            "Required": true,
            "DefaultValue": ""
          },
          {
            "Name": "USER_NAME",
            "SourceField": "UserName",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": "Unknown"
          },
          {
            "Name": "movie-year",
            "SourceField": "Year",
            "Format": "Argument",
            "Required": false,
            "DefaultValue": ""
          },
          {
            "Name": "MOVIE_GENRES",
            "SourceField": "Genres",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": ""
          }
        ]
      }
    },
    {
      "name": "TV Episode Progress Tracker",
      "description": "Track TV episode viewing progress",
      "config": {
        "Name": "Episode Progress Tracker",
        "Description": "Log episode viewing progress to external system",
        "Enabled": true,
        "Priority": 90,
        "Triggers": ["PlaybackStart", "PlaybackStop"],
        "Conditions": [
          {
            "Field": "ItemType",
            "Operator": "Equals",
            "Value": "Episode",
            "CaseSensitive": false
          }
        ],
        "Execution": {
          "ExecutorType": "NodeJs",
          "ExecutablePath": "/usr/bin/node",
          "ScriptPath": "/config/scripts/episode_tracker.js",
          "WorkingDirectory": "/config/scripts",
          "AdditionalArguments": "",
          "EnvironmentVariables": {
            "LOG_LEVEL": "DEBUG"
          },
          "TimeoutSeconds": 30
        },
        "DataAttributes": [
          {
            "Name": "EVENT_TYPE",
            "SourceField": "EventType",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": "Unknown"
          },
          {
            "Name": "series-data",
            "SourceField": "SeriesName",
            "Format": "Json",
            "Required": true,
            "DefaultValue": "{}"
          },
          {
            "Name": "SEASON_NUM",
            "SourceField": "SeasonNumber",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": "0"
          },
          {
            "Name": "EPISODE_NUM",
            "SourceField": "EpisodeNumber",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": "0"
          },
          {
            "Name": "CLIENT_NAME",
            "SourceField": "ClientName",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": "Unknown"
          }
        ]
      }
    },
    {
      "name": "Library Content Processor",
      "description": "Process new content added to library",
      "config": {
        "Name": "New Content Processor",
        "Description": "Process and categorize newly added library content",
        "Enabled": true,
        "Priority": 80,
        "Triggers": ["ItemAdded"],
        "Conditions": [
          {
            "Field": "LibraryName",
            "Operator": "NotContains",
            "Value": "Music",
            "CaseSensitive": false
          }
        ],
        "Execution": {
          "ExecutorType": "Python",
          "ExecutablePath": "/usr/bin/python3",
          "ScriptPath": "/config/scripts/content_processor.py",
          "WorkingDirectory": "/config/scripts",
          "AdditionalArguments": "--batch-mode",
          "EnvironmentVariables": {
            "PROCESS_MODE": "FULL"
          },
          "TimeoutSeconds": 120
        },
        "DataAttributes": [
          {
            "Name": "item-data",
            "SourceField": "AdditionalData",
            "Format": "Json",
            "Required": false,
            "DefaultValue": "{}"
          },
          {
            "Name": "LIBRARY_NAME",
            "SourceField": "LibraryName",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": ""
          },
          {
            "Name": "item-path",
            "SourceField": "ItemPath",
            "Format": "Argument",
            "Required": true,
            "DefaultValue": ""
          }
        ]
      }
    },
    {
      "name": "User Activity Logger",
      "description": "Log user activity for analytics",
      "config": {
        "Name": "User Activity Logger",
        "Description": "Log all user playback activity for analytics",
        "Enabled": true,
        "Priority": 70,
        "Triggers": ["PlaybackStart", "PlaybackStop", "PlaybackPause", "PlaybackResume"],
        "Conditions": [],
        "Execution": {
          "ExecutorType": "Bash",
          "ExecutablePath": "/bin/bash",
          "ScriptPath": "/config/scripts/activity_logger.sh",
          "WorkingDirectory": "/config/scripts",
          "AdditionalArguments": "",
          "EnvironmentVariables": {
            "LOG_FORMAT": "JSON",
            "LOG_DESTINATION": "/var/log/jellyfin/activity.log"
          },
          "TimeoutSeconds": 15
        },
        "DataAttributes": [
          {
            "Name": "EVENT_TYPE",
            "SourceField": "EventType",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": ""
          },
          {
            "Name": "USER_ID",
            "SourceField": "UserId",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": ""
          },
          {
            "Name": "USER_NAME",
            "SourceField": "UserName",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": ""
          },
          {
            "Name": "SESSION_ID",
            "SourceField": "SessionId",
            "Format": "Environment",
            "Required": false,
            "DefaultValue": ""
          },
          {
            "Name": "timestamp",
            "SourceField": "Timestamp",
            "Format": "Argument",
            "Required": true,
            "DefaultValue": ""
          }
        ]
      }
    },
    {
      "name": "PowerShell System Integration",
      "description": "Windows PowerShell integration example",
      "config": {
        "Name": "PowerShell System Integration",
        "Description": "Example PowerShell script integration for Windows systems",
        "Enabled": false,
        "Priority": 60,
        "Triggers": ["PlaybackStart"],
        "Conditions": [
          {
            "Field": "ClientName",
            "Operator": "Contains",
            "Value": "Windows",
            "CaseSensitive": false
          }
        ],
        "Execution": {
          "ExecutorType": "PowerShell",
          "ExecutablePath": "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe",
          "ScriptPath": "C:\\Scripts\\JellyfinIntegration.ps1",
          "WorkingDirectory": "C:\\Scripts",
          "AdditionalArguments": "-ExecutionPolicy Bypass",
          "EnvironmentVariables": {
            "JELLYFIN_EVENT": "PLAYBACK"
          },
          "TimeoutSeconds": 45
        },
        "DataAttributes": [
          {
            "Name": "EventData",
            "SourceField": "AdditionalData",
            "Format": "Json",
            "Required": false,
            "DefaultValue": "{}"
          },
          {
            "Name": "MEDIA_TITLE",
            "SourceField": "ItemName",
            "Format": "Environment",
            "Required": true,
            "DefaultValue": ""
          }
        ]
      }
    }
  ],
  "field_reference": {
    "available_fields": [
      "EventType",
      "Timestamp",
      "UserId",
      "UserName",
      "SessionId",
      "ItemId",
      "ItemName",
      "ItemType",
      "ItemPath",
      "LibraryId",
      "LibraryName",
      "PlaybackPositionTicks",
      "IsPaused",
      "ClientName",
      "DeviceName",
      "DeviceId",
      "SeriesName",
      "SeasonNumber",
      "EpisodeNumber",
      "Year",
      "Genres",
      "ContentRating",
      "AdditionalData"
    ],
    "event_types": [
      "PlaybackStart",
      "PlaybackStop",
      "PlaybackPause",
      "PlaybackResume",
      "PlaybackProgress",
      "ItemAdded",
      "ItemUpdated",
      "UserCreated",
      "UserDeleted"
    ],
    "executor_types": [
      "Python",
      "PowerShell",
      "Bash",
      "NodeJs",
      "Binary"
    ],
    "condition_operators": [
      "Equals",
      "NotEquals",
      "Contains",
      "NotContains",
      "StartsWith",
      "EndsWith",
      "Regex",
      "GreaterThan",
      "LessThan",
      "In",
      "NotIn"
    ],
    "data_formats": [
      "String",
      "Json",
      "Environment",
      "Argument"
    ]
  }
}
